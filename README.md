# Sweater Weather

## Overview

Sweater Weather is back-end Rails API designed to serve weather and trip information to a front-end app. It consumes 4 different APIs and exposes data to help road-trippers plan for weather given a destination and estimated arrival time. The application consumes:

- [OpenWeather API](https://openweathermap.org/api/one-call-api) for weather forecasts and prediction data
- [MapQuest Geolocation API](https://developer.mapquest.com/documentation/geocoding-api/) for latitude & longitude of trip origin and destination inputs
- [MapQuest Directions API](https://developer.mapquest.com/documentation/directions-api/API ) for trip travel information
- [Pexel API](https://www.pexels.com/api/documentation/?#guidelines) for relevant photos of trip destination

## Technologies & Architecture

- Framework: Ruby on Rails
- Testing: RSpec
- JSON Serializer: FastJsonAPI
- 3rd Party APIs:
  - OpenWeather API
  - MapQuest Geolocation API
  - MapQuest Direction API
  - Pexel API
- Response Caching: VCR & Webmock
- Test Coverage: SimpleCov

## Setup
1. Fork & clone the repo
2. Run `bundle install`
3. Run `rails db:{create,migrate}`
4. Run `bundle exec figaro install`
5. Add your API keys to the newly created `config/application.yml` file.
6. To run local test suite: `bundle exec rspec`
  * All API responses in test suite are mocked using `webmock` and `vcr` gems with the exception of the tests under `spec/services` which test the original external API connections to three different sources.

## Endpoints

All endpoints are built on this API URL:
```
http://localhost:3000/api/v1/
```
Note the appropriate HTTP verb for each endpoint.

### Forecast

Retrieve detailed weather information for a given city, including:
- Current conditions
- Hourly forecasts for next 8 hours
- Daily forecasts for next 5 days

### Backgrounds

Retrieve a background image URL from Pexel for a given city, which can be resized to fit one's needs.

### Users

Submit a user's email, password, and password confirmation to create that user in the database and receive a unique API key for the user.

### Sessions

Submit an existing user's email and password and receive their unique API key generated by the previous endpoint.

### Road Trip

Submit an origin and a destination along with a user's API key and receive information on travel time and the temperature and weather upon arrival.
